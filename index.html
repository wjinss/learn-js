<!DOCTYPE html>
<html lang="ko-KR">
  <head>
    <meta charset="UTF-8" />
    <title>자바스크립트 펀더멘탈</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- MIME 타입 -->
    <!-- css MIME 타입 (기본값 text/css 생략가능) -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./assets/styles/main.css" />
    <link rel="icon" href="./assets/images/ecmascript-logo.png" />
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/gsap.min.js"></script>
    <script src="./assets/scripts/learn/72-xss-sanitize.js" defer></script>
  </head>

  <body>
    <h1>JavaScript</h1>
    <!-- <form id="login-form2">
      <div class="form-field">
        <label for="user-id">아이디</label>
        <input type="text" name="userid" id="user-id" />
      </div>
      <div class="form-field">
        <label for="user-pw">비밀번호</label>
        <input type="password" name="password" id="user-pw" />
      </div>
      <button type="submit">로그인</button>
    </form> -->
    <!-- <form id="feedback-form">
      <div class="form-field">
        <label for="user-email">이메일</label>
        <input type="email" name="email" id="user-email" />
      </div>
      <div class="form-field">
        <label for="feedback">피드백</label>
        <textarea name="feedback" id="feedback"></textarea>
      </div>
      <button type="submit">보내기</button>
    </form> -->
    <form id="radio-check-form">
      <p>관심있는 프로그래밍 언어는?</p>
      <label
        ><input type="radio" name="lang" value="JavaScript" /> JavaScript</label
      >
      <label><input type="radio" name="lang" value="Python" /> Python</label>
      <label><input type="radio" name="lang" value="Java" /> Java</label>
      <button type="submit">선택 완료</button>
    </form>
    <main hidden>
      <form class="form">
        <div>
          <label for="email">이메일</label>
          <input
            type="email"
            name="email"
            id="email"
            placeholder="user@example.com"
          />
        </div>
        <div>
          <label for="contents">콘텐츠</label>
          <input
            type="text"
            name="contents"
            id="contents"
            placeholder="구독 메시지"
          />
        </div>
        <p>어떤 과일을 좋아하세요? (하나만 체크 가능)</p>
        <div class="checkbox">
          <input type="checkbox" name="apple" id="apple" value="사과" checked />
          <label for="apple">🍎 사과</label>
        </div>
        <div class="checkbox">
          <input type="checkbox" name="grape" id="grape" />
          <label for="grape">🍇 포도</label>
        </div>
        <div class="checkbox">
          <input type="checkbox" name="lemon" id="lemon" checked />
          <label for="lemon">🍋 레몬</label>
        </div>

        <div
          class="textarea"
          style="
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-block: 20px;
          "
        >
          <label for="comment">댓글</label>
          <textarea
            id="comment"
            name="comment"
            placeholder="댓글을 작성해주세요."
            cols="30"
            rows="5"
          ></textarea>
        </div>

        <button type="submit">출력</button>
        <button type="reset">초기화</button>
      </form>

      <script>
        () => {
          // 폼 컨트롤(요소)의 이벤트 타입
          const form = document.querySelector("form");

          // 폼 컨트롤 요소에 직접 이벤트 리스너 수신
          // 이벤트 발생 순서
          // focus → focusin → input → change → blur → focusout

          // focus 이벤트
          // - 입력 필드에 초점이 이동될 때 수신 중인 리스너가 실행됨
          form.email.addEventListener("focus", (e) => {
            const emailValue = e.currentTarget.value.trim();
            console.log("focus\n", emailValue);
          });

          // focusin 이벤트
          // - focus 이후에 감지되며 수신 중인 이벤트 리스너 실행됨
          form.email.addEventListener("focusin", (e) => {
            const emailValue = e.currentTarget.value.trim();
            console.log("focusin\n", emailValue);
          });

          // input 이벤트
          // - 입력 필드에 입력할 때 마다 수신 중인 리스너가 실행
          form.email.addEventListener("input", (e) => {
            const emailValue = e.currentTarget.value.trim();
            console.log("input\n", emailValue);
          });

          // change 이벤트
          // - 입력 필드를 벗어나면 이벤트 감지 수신 중인 리스너가 실행
          form.email.addEventListener("change", (e) => {
            const emailValue = e.currentTarget.value.trim();
            console.log("change\n", emailValue);
          });

          // blur 이벤트
          // - 입력 필드에서 벗어날 때 change 이벤트 발동 이후, 수신 중인 리스너 실행됨
          form.email.addEventListener("blur", (e) => {
            const emailValue = e.currentTarget.value.trim();
            console.log("blur\n", emailValue);
          });

          // focusout 이벤트
          // - blur 이후에 감지되며 수신 중인 리스너 실행됨
          form.email.addEventListener("focusout", (e) => {
            const emailValue = e.currentTarget.value.trim();
            console.log("focusout\n", emailValue);
          });
        };

        () => {
          // 폼 요소에 이벤트 위임 (이벤트 전파 : 둘(캡쳐링 or 버블링) 중 하나의 단계로 적용)
          // 이벤트 버블링이 적용되는 이벤트 타입과 그렇지 않은 타입
          // 이벤트 버블링 단계의 이벤트 전파 방향: 자식 요소 → 부모 요소

          const form = document.querySelector("form");
          const lastFormControl = [...form.elements].at(-1);

          // focus 이벤트는 버블링되지 않음 ❌
          form.addEventListener("focus", (e) => {
            console.log("focus\n", e.target);
          });

          // focusin 이벤트는 버블링됨 ✅
          form.addEventListener("focusin", (e) => {
            console.log("focusin\n", e.target);
          });

          // input 이벤트는 버블링됨 ✅
          form.addEventListener("input", (e) => {
            console.log("input\n", e.target);
          });

          // change 이벤트는 버블링됨 ✅
          form.addEventListener("change", (e) => {
            console.log("change\n", e.target);
          });

          // blur 이벤트는 버블링되지 않음 ❌
          form.addEventListener("blur", (e) => {
            console.log("blur\n", e.target);
          });

          // focusout 이벤트는 버블링됨 ✅
          form.addEventListener("focusout", (e) => {
            console.log("focusout\n", e.target);

            if (e.target === lastFormControl) {
              console.log("열린 상태면 닫아라!");
            }
          });
        };
      </script>

      <!-- <form class="form">
        <p>어떤 과일을 좋아하세요?</p>
        <div class="checkbox">
          <input type="checkbox" name="apple" id="apple" value="사과" checked />
          <label for="apple">🍎 사과</label>
        </div>
        <div class="checkbox">
          <input type="checkbox" name="grape" id="grape" />
          <label for="grape">🍇 포도</label>
        </div>
        <div class="checkbox">
          <input type="checkbox" name="lemon" id="lemon" checked />
          <label for="lemon">🍋 레몬</label>
        </div>
      </form> -->

      <!-- <form action="/subscribe" method="POST">
        <div>
          <label for="email">이메일</label>
          <input
            type="email"
            name="email"
            id="email"
            placeholder="user@example.com"
          />
        </div>
        <div>
          <label for="contents">콘텐츠</label>
          <input
            type="text"
            name="contents"
            id="contents"
            placeholder="구독 메시지"
          />
        </div>
        <button type="submit">구독</button>
      </form> -->

      <script>
        () => {
          // 옵셔널 체이닝 (Optional Chaining)
          // ?.
          // - 선택적 연결 구문 (조건 처리)

          const o = {
            name: "coffee",
            getName() {
              return this.name;
            },
          };

          // 속성
          console.log(o.amount);
          console.log(o.isExist);

          // 메서드
          // 메서드 실행 전에 해당 메서드를 객체가 가지고 있는 지 검사 (필수!)

          // 옵셔널 체이닝을 사용하지 않을 때 조건 처리
          // if (o && 'getName' in o && typeof o.getName === 'function') {
          //   console.log(o.getName())
          // }

          // 옵셔널 체이닝을 사용할 때 조건 처리
          console.log(o.getName?.());

          // 옵셔널 체이닝을 사용하지 않을 때 조건 처리
          if (o && o.getAmount && typeof o.getAmount === "function") {
            console.log(o.getAmount()); // TypeError: o.getAmount is not a function
          }

          // 옵셔널 체이닝을 사용할 때 조건 처리
          console.log(o.getAmount?.());

          // Null 병합 연산자 (Nullish coalescing operator)
          // ??
          // - null 또는 undefined 여부를 검토해 초깃값 설정 (조건 처리)

          // 사용자가 설정한 값
          let customValue = 0;

          // 시스템에서 사용될 값 (사용자가 설정한 값 > 기본값)
          let defaultValue = 5;

          // let configValue = defaultValue
          // if (customValue) configValue = customValue
          // let configValue = !(customValue === undefined || customValue === null) ? customValue : defaultValue
          // let configValue = customValue || defaultValue
          let configValue = customValue ?? defaultValue;

          // 시스템에서 사용되는 값은 사용자가 설정한 값이 우선한다.
          console.log({ configValue });
        };
      </script>
      <script>
        const form = document.querySelector("form");
        form.addEventListener("submit", (e) => {
          e.preventDefault();

          const form = e.currentTarget;

          // 폼 요소 순환

          // 방법 1.
          // for (const element of form.elements) {
          //   console.log(element)
          // }

          // 방법 2.
          // Array.from(form.elements).forEach((element) => console.log(element))
          // const formElements = [...form.elements]
          // formElements.forEach((element) => console.log(element))

          // 폼 요소 찾는 다양한 방법
          // console.log(form.email.value);
          // console.log(form.contents.value);

          // console.log(form.elements);
          // console.log(form.elements.email);
          // console.log(form.elements[0]);
          // console.log(form.elements.contents);
          // console.log(form.elements[1]);
          // console.log(form.elements[2]);

          // form.submit()

          // 서버와 데이터 통신
          // 비동기(AJAX) 방식으로 처리
          // XMLHttpRequest 객체 사용
          // Promise 객체 사용
        });
      </script>
      <!-- beforebegin : before() -->
      <h1 style="display: flex">
        <!-- afterbegin : prepend() -->
        JavaScript
        <!-- beforeend : append() -->
      </h1>
      <!-- afterend : after() -->
      <article>
        <h2>라면 끓이는 방법</h2>
        <ol class="ramen-cooking-recipe">
          <li>물을 냄비에 붓고 끓입니다 (약 500ml).</li>
          <li>물이 끓으면 스프를 먼저 넣습니다.</li>
          <li>면을 넣고 3~4분간 끓입니다.</li>
          <li>취향에 따라 파, 계란, 치즈 등을 추가합니다.</li>
          <li>면이 익으면 불을 끄고 그릇에 옮깁니다.</li>
        </ol>
      </article>
      <section></section>
      <button type="button">다른 목록으로 이동</button>
      <div style="display: flex; justify-content: space-between; gap: 20px">
        <ol class="fruits-i-like">
          <li>바나나</li>
          <li>파인애플</li>
          <li>오렌지</li>
        </ol>
        <ol class="fruits-i-dont-like">
          <li>스트로베리</li>
        </ol>
      </div>
      <div
        class="mount"
        style="display: flex; flex-direction: column; gap: 0.5rem"
      >
        <span>자식 1</span>
        <span>자식 2</span>
      </div>
      <ul id="fruitList"></ul>
      <p>웹 프로그래밍 언어</p>
      <!-- 기본 매개변수 -->
      <header>
        <button type="button">test</button>
      </header>
      <div
        id="controller"
        role="group"
        style="display: flex; gap: 4px; margin-block: 12px"
      >
        <button type="button" data-role="add-event">이벤트 추가</button>
        <button type="button" data-role="remove-event">이벤트 제거</button>
        <button data-role="tester" type="button">이벤트 추가 대기중...</button>
        <button type="button" data-role="once-event">1회만 이벤트 설정</button>
      </div>
      <div class="practice">
        <form>
          <div>
            <label for="username">이름</label>
            <input id="username" type="text" placeholder="이름을 입력하세요." />
          </div>
          <div>
            <label for="meal">식사</label>
            <select id="meal">
              <option>식사 종류</option>
              <option value="breakfast">아침</option>
              <option value="lunch">점심</option>
              <option value="dinner">저녁</option>
            </select>
          </div>
          <button type="button">인사하기</button>
        </form>
        <p>인사말 출력</p>
      </div>
      <!-- 얼리 리턴 -->
      <div class="practice1">
        <form>
          <div>
            <label for="username">이름</label>
            <input
              id="username"
              name="username"
              placeholder="이름을 입력하세요"
            />
          </div>
          <button type="submit">확인</button>
        </form>
        <output>결과 출력</output>
      </div>
      <div
        class="practice2"
        style="display: flex; flex-direction: column; gap: 20px"
      >
        <input
          type="number"
          aria-label="점수"
          placeholder="점수를 입력하세요"
        />
        <button type="button">등급 확인</button>
        <output>등급 출력</output>
      </div>

      <!-- GSAP -->
      <div class="ball"></div>
      <div role="group" style="display: flex; gap: 4px; margin-block: 12px">
        <button type="button" data-role="add-event">이벤트 추가</button>
        <button type="button" data-role="remove-event">이벤트 제거</button>
        <button data-role="tester" type="button">이벤트 추가 대기중...</button>
        <button type="button" data-role="once-event">1회만 이벤트 설정</button>
      </div>

      <ul class="link-list">
        <li id="fruits">
          <a href="/news">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="M15 18h-5" />
              <path d="M18 14h-8" />
              <path
                d="M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-4 0v-9a2 2 0 0 1 2-2h2"
              />
              <rect width="8" height="4" x="10" y="6" rx="1" />
            </svg>
            <span>최신 뉴스 보기</span>
          </a>
        </li>
        <li><a href="/tutorials">📘 튜토리얼 모음</a></li>
        <li><a href="/community">💬 커뮤니티 참여</a></li>
        <li><a href="/resources">📁 개발 자료실</a></li>
        <li><a href="/contact">📮 문의하기</a></li>
      </ul>

      <div class="box box1">
        <span>박스 1</span>
        <div class="box box2">
          <span>박스 2</span>
          <div class="box box3">
            <span>박스 3</span>
          </div>
        </div>
      </div>

      <form data-learn="form" method="GET" action="https://google.com">
        <div>
          <label for="search-term">검색어</label>
          <input
            type="search"
            name="search-term"
            id="search-term"
            placeholder="검색어를 입력"
          />
        </div>
        <div style="margin-block-start: 8px">
          <button type="submit">검색</button>
          <button type="reset">초기화</button>
        </div>
      </form>
    </main>
  </body>
</html>
